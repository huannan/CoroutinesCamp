## 笔记

### 什么是协程

协程是程序中处理并发任务的方案，也是这种方案的一个组件。
广义上协程和线程属于一个层级的概念。

### Kotlin协程

协程在JVM上面其实就是一个线程框架，但是广义上的协程不一定是线程框架。
协程的优势在于可以来回切换线程，永远都是一条线，不需要回调

### 并发和并行

并发：更宏观的视觉，处理不同的任务，但是不一定是同一时间。比如后台请求数据前台显示数据属于并发。
并行：更微观的视觉，必须是同一时间执行多个任务的才是并行，会涉及到线程安全问题。协程里面没有并行，但是线程里面有。

Kotlin协程并不属于广义上的协程，Kotlin协程并不需要关心并发和并行，本质上还是基于JVM，底层实现还是线程，并不能避免线程安全问题。

优势：函数的创建者指定了线程，保证耗时代码百分百都可以在后台线程执行，从而提高了软件的性能。

## 作业(面试题模拟)

### Kotlin 的协程是什么？它有什么优势？为什么？

关键点：

1. 它是 Kotlin 基于 JVM 的线程来实现的一个并发任务处理框架（或者方案）。
面试官可能抬杠的点：「一定是基于线程吗？」建议不要对着杠。
2. 优势：
2.1 方便：不需要回调，用纯线性的方式就可以完成线程的切换；
2.2 性能：所有耗时任务可以保证一定放在后台执行，从而提高软件性能。

### Kotlin 协程的 suspend 关键字有什么意义？

语法层面：作为一个标记和提醒。通过报错来提醒调用者和编译器，这是一个耗时函数，需要放在后台执行。

编译器层面：辅助 Kotlin 编译器来把代码转换成 JVM 的字节码。（其实这不是 suspend 的关键意义，但很多面试官不这么觉得。）

### 如果不使用协程，让你自己实现一个和协程类似的框架，你认为难点在哪里？

1. 在不使用回调的前提下完成线程切换；
2. 在挂起函数执行完毕时，自动判断应该回到哪个线程。
（这个问题的出现概率比较低，但如果碰上而且答出来，你就上天了。）
